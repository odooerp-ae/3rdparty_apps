<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="oe_inherit_product" inherit_id="website_sale.product" active="True" name="Tabby Promo">
            <xpath expr="//div[@class='category-mobile-pd']" position="before">
                <!-- Load the Tamara widget script -->
                <script src="https://cdn.tamara.co/widget/product-widget.min.js"></script>

                <t t-set="tamara" t-value="website.company_id" />
                <!-- Add this where you want the widget to appear (e.g., below price on product page) -->
                <t t-set="tamara_acq"
                        t-value="request.env['payment.provider'].sudo().search([('code','=','tamara'),('state','in',['test','enabled'])],limit=1)" />
                <t t-if="tamara_acq">
                    <div class="col-12 col-lg-9 pb-2">
                        <div
                            class="tamara-product-widget"
                            t-att-data-lang="request.env.lang.split('_')[0]"
                            t-att-data-price="combination_info['price']"
                            t-att-data-currency="tamara.currency_id.name"
                            t-att-data-payment-type="tamara.data_payment_type"
                            t-att-data-disable-installment="str(tamara.data_disable_installment).lower()"
                            t-att-data-disable-paylater="str(tamara.data_disable_paylater).lower()"
                            t-att-data-installment-minimum-amount="tamara.data_installment_minimum_amount"
                            t-att-data-installment-maximum-amount="tamara.data_installment_maximum_amount"
                            t-att-data-installment-available-amount="tamara.data_installment_available_amount"
                            t-att-data-pay-later-max-amount="tamara.data_pay_later_max_amount"
                        />
                    </div>
                </t>

            </xpath>
        </template>
    </data>
</odoo>
